# 项目说明文档

## 项目概述

**项目名称**：Research Ideas Network

**Network ID**：research-ideas-network-1

**一句话简介**：一个使用OpenAgents框架生成和评估研究创意的多智能体系统，通过协作工作流协调专门的智能体来生成高质量的研究提案。

**目标用户/使用场景**：
- 研究人员：需要快速生成和评估研究创意
- 学术团队：寻求创新研究方向和课题
- 创新机构：需要系统化的创意生成和筛选流程
- 学生：寻找研究课题和论文方向

## 技术架构

**使用的OpenAgents版本与相关技术栈**：
- OpenAgents版本：0.7.0+
- Python版本：3.8+
- 通信协议：HTTP（端口8709）和gRPC（端口8609）
- 模型提供商：OpenAI兼容API（使用qwen3-max-preview模型）
- 智能体类型：CollaboratorAgent（协作型）和WorkerAgent（工作型）

**Agent Network设计思路**：
采用集中式（centralized）架构，以Leader Agent为核心协调器，通过事件驱动的异步通信机制协调多个专门智能体协同工作。系统采用流水线式的多阶段处理流程，每个阶段由专门智能体负责，确保创意生成的专业性和质量。

**系统流程图或架构图**：

```
用户请求
    ↓
Leader Agent（协调器）
    ↓
    ├─→ Domain Agent（领域专家）→ 生成初始创意
    ↓
    ├─→ Method Agent（方法论专家）→ 完善方法论
    ↓
    ├─→ Application Agent（实验专家）→ 完善实验设置
    ↓
    ├─→ Refinement Agent（完善Agent）→ 检查与迭代优化（最多2轮）
    ↓         ↓
    ├─────────┴→ 评估Agent → 多维度评分与排名
    ↓
Leader Agent → 输出最终结果
    ↓
Wiki知识库（记录完整过程）
```

## 智能体设计

**每个Agent的角色与功能说明**：

1. **Leader Agent（领导者智能体）**
   - **角色**：项目协调器和工作流控制器
   - **功能**：
     - 理解用户输入（研究领域/主题）
     - 规划讨论轮次和规则
     - 将任务委派给其他智能体
     - 控制收敛和终止条件
     - 组织最终输出
     - 管理Wiki知识库，记录完整研究过程

2. **Domain Agent（领域智能体）**
   - **角色**：领域专家
   - **功能**：
     - 深入研究给定研究领域
     - 从领域角度生成创意
     - 识别领域特定的挑战和机会
     - 生成5个初始研究创意

3. **Method Agent（方法论智能体）**
   - **角色**：方法论专家
   - **功能**：
     - 完善研究创意的方法论部分
     - 提供详细的研究方法说明
     - 考虑不同的研究方法（实验、理论、计算等）
     - 确保方法论的可行性和创新性

4. **Application Agent（应用智能体/实验智能体）**
   - **角色**：实验专家
   - **功能**：
     - 完善研究创意的实验设置
     - 提供具体的实施细节
     - 考虑实验设备、数据收集和分析方法
     - 确保实验的可操作性

5. **Refinement Agent（完善智能体）**
   - **角色**：质量检查和优化专家
   - **功能**：
     - 检查创意的方法论和实验设置问题
     - 提供具体的改进反馈
     - 与Method Agent和Application Agent协调进行迭代优化
     - 支持最多2轮优化
   - **实现方式**：使用Python实现的WorkerAgent，包含详细的检查逻辑

6. **Evaluation Agent（评估智能体）**
   - **角色**：评估专家
   - **功能**：
     - 对研究创意进行多标准评估
     - 基于5个维度评分：技术可行性（25%）、影响力（30%）、新颖性（20%）、相关性（15%）、清晰度（10%）
     - 对创意进行排名和选择Top-K
     - 提供详细的评估报告，包括优势、劣势和建议

**多Agent协作机制与通信方式**：
- **通信方式**：基于事件的异步通信（Event-driven）
- **事件流**：
  - `idea.generate.domain` → `idea.generated.domain`
  - `idea.enhance.methodology` → `idea.enhanced.methodology`
  - `idea.enhance.experiment` → `idea.enhanced.experiment`
  - `idea.check` → `idea.check.result`
  - `idea.evaluate` → `idea.evaluated`
- **频道通信**：使用Messaging Mod的频道功能
  - `leader`频道：Leader Agent进度更新
  - `discussion`频道：所有智能体共享创意、评审和结果
- **数据格式**：严格JSON格式，单行输出，禁止换行符

**使用的Mod驱动及其他高级特性**：
1. **openagents.mods.workspace.default**：基础工作空间功能
2. **openagents.mods.workspace.wiki**：Wiki知识库
   - 存储完整研究过程
   - 支持搜索、创建和编辑页面
   - 记录每个阶段的进展
3. **openagents.mods.workspace.messaging**：消息传递
   - 频道功能用于进度共享
   - 支持多线程讨论
4. **openagents.mods.workspace.project**：项目管理
   - 支持多项目并发
   - 最大5个并发项目
5. **自定义Mod**：evaluation
   - 提供评估功能扩展
   - 支持多维度评分和排名

## 协作场景与创新点

**协作场景描述**：

**场景1：初始创意生成**
- 用户向Leader Agent发送研究领域请求
- Leader Agent搜索Wiki知识库获取相关背景
- Domain Agent从领域深度视角生成5个创意
- 所有创意记录到Wiki主页面

**场景2：方法论完善**
- Method Agent接收5个创意
- 为每个创意完善方法论部分
- 提供详细的研究方法、实施步骤
- 返回完善后的创意

**场景3：实验设置完善**
- Application Agent接收完善方法论的创意
- 为每个创意完善实验设置
- 提供具体的实验配置、设备、数据集信息
- 返回优化后的创意

**场景4：迭代优化（创新点）**
- Refinement Agent检查所有创意
- 识别方法论和实验设置的问题
- 将需要改进的创意交回相应专家
- 专家修改后再次提交检查
- 最多进行2轮迭代优化
- 确保所有创意达到质量标准

**场景5：多维度评估**
- Evaluation Agent接收最终创意
- 从5个维度进行评分
- 计算加权总分并排名
- 提供详细评估报告
- 返回Top-K排名创意

**创新性体现**：

1. **迭代优化机制**
   - 传统的多智能体系统通常是单向流水线
   - 本系统引入反馈循环，支持最多2轮迭代优化
   - Refinement Agent作为质量守门员，确保创意质量
   - 智能体间双向通信，根据反馈持续改进

2. **多维度评估体系**
   - 采用加权评分机制（影响力30%、技术可行性25%等）
   - 提供详细的评估报告（优势、劣势、建议）
   - 排名机制帮助用户快速识别最佳创意

3. **Wiki知识库集成**
   - 完整记录研究过程，从初始生成到最终评估
   - 支持历史查询和知识积累
   - 每个阶段都更新Wiki，形成完整的研究文档

4. **智能体专业化分工**
   - 每个智能体专注于特定领域（领域、方法论、实验、评估）
   - 专业化分工提高创意质量
   - 协作机制确保各专业知识的有效整合

5. **灵活的任务分配**
   - Refinement Agent智能识别需要改进的创意
   - 只将需要改进的创意交回相应专家
   - 避免不必要的重复工作，提高效率

6. **异常处理机制**
   - 最大轮次限制（2轮优化）防止无限循环
   - 如果达到最大轮次仍未通过检查，自动进入评估阶段
   - 确保系统总能产生结果

## 实际应用价值

**解决的问题**：

1. **研究创意生成困难**
   - 研究人员常常面临创意枯竭的问题
   - 系统从多个角度生成多样化创意，激发灵感

2. **创意质量参差不齐**
   - 个人生成的创意可能缺乏全面性
   - 多智能体协作确保创意的专业性和完整性

3. **评估标准不统一**
   - 缺乏系统的评估框架
   - 提供标准化的多维度评估体系

4. **研究过程记录缺失**
   - 研究过程难以追溯和复现
   - Wiki知识库完整记录研究过程

5. **协作效率低下**
   - 团队协作沟通成本高
   - 自动化的多智能体协作提高效率

**可扩展性与未来延伸**：

1. **扩展更多生成器智能体**
   - 添加跨领域智能体：促进跨学科创新
   - 添加产业应用智能体：关注实际应用价值
   - 添加伦理审查智能体：确保研究的伦理合规性

2. **增强评估维度**
   - 添加成本效益分析
   - 添加时间可行性评估
   - 添加社会影响评估

3. **集成外部资源**
   - 连接学术数据库（如arXiv、Google Scholar）
   - 集成专利数据库，避免重复研究
   - 连接基金数据库，提高资助成功率

4. **用户个性化**
   - 根据用户历史偏好调整创意生成
   - 支持用户自定义评估权重
   - 提供个性化推荐

5. **可视化界面**
   - 开发Web界面，提供更好的用户体验
   - 可视化创意生成过程
   - 交互式评估和筛选

6. **多语言支持**
   - 支持多种语言的研究创意生成
   - 跨语言文献检索

7. **团队协作功能**
   - 支持多用户同时使用
   - 团队共享和评论功能
   - 版本控制和变更追踪

## 开发、发布与使用说明

**环境依赖**：
- Python 3.8或更高版本
- 已安装OpenAgents框架（版本0.7.0+）
- 可访问OpenAgents服务器的网络连接
- 操作系统：Windows、Linux或macOS

**安装与运行步骤**：

1. **克隆或下载项目**
```bash
cd 09_research_ideas_network
```

2. **验证项目结构**
```
09_research_ideas_network/
├── network.yaml
├── agents/
│   ├── leader_agent.yaml
│   ├── domain_agent.yaml
│   ├── method_agent.yaml
│   ├── application_agent.yaml
│   ├── evaluation_agent.yaml
│   └── refinement_agent.py
├── mods/
│   └── evaluation/
│       ├── __init__.py
│       └── mod.py
├── start_all.sh
├── stop_all.sh
└── README.md
```

3. **启动网络服务器**
```bash
openagents network start network.yaml
```
网络将在以下地址启动：
- HTTP: http://localhost:8709
- gRPC: localhost:8609

4. **启动智能体**

**方式一：使用启动脚本（推荐）**
```bash
./start_all.sh
```

**方式二：手动启动（用于调试）**
```bash
# Leader Agent
openagents agent start agents/leader_agent.yaml

# Domain Agent
openagents agent start agents/domain_agent.yaml

# Method Agent
openagents agent start agents/method_agent.yaml

# Application Agent
openagents agent start agents/application_agent.yaml

# Evaluation Agent
openagents agent start agents/evaluation_agent.yaml

# Refinement Agent（Python实现）
python agents/refinement_agent.py
```

5. **停止所有智能体**
```bash
./stop_all.sh
```

**关键配置**：

1. **API密钥配置**（注意安全，勿泄露真实密钥）
   - 在各智能体的YAML文件中配置`api_key`和`api_base`
   - 建议使用环境变量存储密钥
   - 不要将密钥提交到版本控制系统

2. **网络配置**
   - 编辑`network.yaml`自定义端口和连接参数
   - HTTP端口：8709
   - gRPC端口：8609
   - 最大连接数：15

3. **智能体组权限**
   - admin：完全权限
   - coordinators：创建项目、委派任务、与用户通信、选择创意
   - generators：生成创意、发送事件
   - refiners：完善创意、发送事件
   - evaluators：评估创意、发送事件

4. **评估配置**
   - 编辑`agents/evaluation_agent.yaml`调整评估维度和权重
   - 默认权重：技术可行性25%、影响力30%、新颖性20%、相关性15%、清晰度10%

5. **Wiki配置**
   - 最大页面数：1000
   - 支持搜索、创建和编辑功能

**使用系统**：

1. 与Leader Agent交互，提供研究领域或主题
2. 系统自动执行6步工作流程
3. 在`discussion`频道查看实时进度
4. 在Wiki中查看完整研究过程
5. 接收Top-K研究创意及详细评估

## 团队成员简介

（根据实际情况填写团队成员信息）

## 遇到的挑战与解决方案

**开发过程中遇到的主要技术难点**：

1. **事件通信的复杂性**
   - **挑战**：多智能体间的事件通信需要精确的参数格式和严格的JSON规范
   - **解决方案**：
     - 制定统一的事件命名规范
     - 强制要求单行JSON输出
     - 实现详细的参数验证机制
     - 添加错误处理和重试机制

2. **迭代优化的状态管理**
   - **挑战**：Refinement Agent需要跟踪优化轮次，判断是否需要继续迭代
   - **解决方案**：
     - 在payload中添加round字段跟踪轮次
     - 使用needs_method_improvement和needs_experiment_improvement字段标记需要改进的创意
     - 设置最大轮次限制（2轮）防止无限循环
     - 实现智能判断逻辑，只将需要改进的创意交回相应专家

3. **Wiki知识库的数据一致性**
   - **挑战**：多个智能体同时更新Wiki页面可能导致数据覆盖
   - **解决方案**：
     - 采用追加模式更新Wiki内容
     - Leader Agent作为唯一的Wiki更新协调者
     - 每次更新前先获取当前内容
     - 使用清晰的章节结构组织内容

4. **评估标准的客观性**
   - **挑战**：如何确保评估的客观性和一致性
   - **解决方案**：
     - 使用加权评分机制
     - 提供详细的评估维度说明
     - 要求AI提供评分理由
     - 实现标准化的评估提示词

5. **Python智能体与YAML智能体的集成**
   - **挑战**：Refinement Agent使用Python实现，其他智能体使用YAML配置，需要确保接口一致性
   - **解决方案**：
     - 统一事件名称和payload格式
     - 使用相同的通信协议（gRPC）
     - 实现相同的事件处理机制
     - 保持一致的错误处理方式

6. **性能优化**
   - **挑战**：多智能体协作可能导致响应时间较长
   - **解决方案**：
     - 使用gRPC协议提高通信效率
     - 启用消息压缩（gzip）
     - 设置合理的超时时间
     - 优化事件处理逻辑

7. **错误处理和恢复**
   - **挑战**：某个智能体失败可能导致整个流程中断
   - **解决方案**：
     - 实现重试机制（最多3次）
     - 添加心跳检测
     - 记录详细日志便于调试
     - 提供手动干预接口

## 未来展望

**如果项目继续发展，下一步计划**：

1. **功能增强**
   - 添加更多生成器智能体（跨领域、产业应用、伦理审查）
   - 增强评估维度（成本效益、时间可行性、社会影响）
   - 实现用户个性化推荐
   - 添加多语言支持

2. **性能优化**
   - 优化事件通信机制，减少延迟
   - 实现智能体并行处理
   - 添加缓存机制提高响应速度
   - 优化Wiki存储和检索

3. **用户体验改进**
   - 开发Web界面
   - 实现可视化展示（创意生成过程、评估结果）
   - 添加交互式筛选和排序功能
   - 支持导出多种格式（PDF、Word、LaTeX）

4. **集成外部资源**
   - 连接学术数据库（arXiv、Google Scholar）
   - 集成专利数据库
   - 连接基金数据库
   - 支持文献自动引用

5. **团队协作功能**
   - 支持多用户同时使用
   - 添加团队共享和评论功能
   - 实现版本控制和变更追踪
   - 添加权限管理系统

6. **商业化应用**
   - 开发SaaS版本
   - 提供API接口供第三方集成
   - 开发移动端应用
   - 提供定制化服务

7. **学术研究**
   - 基于系统数据进行多智能体协作研究
   - 发表相关学术论文
   - 参与开源社区贡献
   - 与高校和研究机构合作

8. **AI能力提升**
   - 引入更先进的AI模型
   - 实现自适应学习机制
   - 添加强化学习优化工作流
   - 实现智能体自主进化

通过这些改进，Research Ideas Network将成为一个更强大、更易用、更智能的研究创意生成和评估平台，为全球研究人员提供更好的支持。